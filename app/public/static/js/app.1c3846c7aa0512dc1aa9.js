webpackJsonp([1],{"/2iM":function(t,e,a){"use strict";var o=a("8A95");a.n(o);e.a={components:{VueEditor:o.VueEditor},data:function(){return{bookId:0,chapter_index:0,chapterId:0,chapter_title:"",content:""}},created:function(){this.getId()},methods:{getId:function(){var t=this;this.bookId=this.$route.query.bookid,this.chapter_index=this.$route.query.currentIndex,this.$route.query.chapterid&&(this.chapterId=this.$route.query.chapterid,this.$axios.get("/chapter/"+this.chapterId).then(function(e){t.chapter_title=e.data.title,t.content=e.data.content})),this.chapter_index||this.$message({message:"请从图书详情页进入该页面来获取当前章节",type:"warning"})},uploadBookChapter:function(){var t=this;""!==this.chapter_title&&""!==this.content&&this.chapter_index||this.$message({message:"标题或内容不能为空, 请从图书详情页进入该页面来获取当前章节",type:"warning"}),0!==this.chapterId?this.$axios.put("/chapter/"+this.chapterId,{title:this.chapter_title,content:this.content}).then(function(e){t.$router.push({path:"/bookinfo/"+t.bookId})}):this.$axios.post("/book/"+this.bookId+"/chapter",{title:this.chapter_title,index:this.chapter_index,content:this.content}).then(function(e){t.$router.push({path:"/bookinfo/"+t.bookId})})},goback:function(){this.$router.push({path:"/bookinfo/"+this.bookId})},handleImageAdded:function(){}}}},"/vsJ":function(t,e){},0:function(t,e){},1:function(t,e){},"12bV":function(t,e,a){"use strict";a("IcnI");e.a={name:"VLOGIN",data:function(){return{user_num:"",user_pwd:"",isShowPwd:!1,loginTipMsg:""}},methods:{showPassword:function(){this.isShowPwd=!this.isShowPwd},btnLogin:function(){var t=this;t.checkEmailAndPwd(t.user_num,t.user_pwd)&&this.$axios.post("/admin/login",{account:t.user_num,password:t.user_pwd}).then(function(e){!1===e.data.error?(e.data.data.nickname,e.data.data.role,t.$emit("userSignIn",e.data.data.nickname,e.data.data.role),t.$router.push("/index")):e.data.error}).catch(function(e){e.response.data.error&&(t.loginTipMsg="账号未注册或密码错误!",t.showLoginTip=!0,window.setTimeout(function(){t.showLoginTip=!1},5e3))})},checkEmailAndPwd:function(t,e){return""===t||""===e?(this.loginTipMsg="账号及密码不能为空！",!1):(this.loginTipMsg="",!0)}}}},"1Xb2":function(t,e,a){"use strict";function o(t){a("rFdY")}var n=a("/2iM"),i=a("EvfC"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-4ed7effa",null);e.a=l.exports},"1kkg":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bookinfo"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.bookData}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.cover,width:"40",height:"40"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"书名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"company",label:"出版社",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"blurb",label:"图书简介",width:"450"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pdate",label:"出版时间",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("修改")]),t._v(" "),a("el-dialog",{attrs:{title:"图书信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.bookForm}},[a("el-form-item",{attrs:{label:"图片","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.bookForm.cover,callback:function(e){t.$set(t.bookForm,"cover",e)},expression:"bookForm.cover"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"书名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.bookForm.name,callback:function(e){t.$set(t.bookForm,"name",e)},expression:"bookForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"作者","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.bookForm.author,callback:function(e){t.$set(t.bookForm,"author",e)},expression:"bookForm.author"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出版社","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.bookForm.company,callback:function(e){t.$set(t.bookForm,"company",e)},expression:"bookForm.company"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图书简介","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.bookForm.blurb,callback:function(e){t.$set(t.bookForm,"blurb",e)},expression:"bookForm.blurb"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出版时间","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.bookForm.pdate,callback:function(e){t.$set(t.bookForm,"pdate",e)},expression:"bookForm.pdate"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateBookInfo}},[t._v("确 定")])],1)],1)]}}])})],1),t._v(" "),a("div",{staticClass:"book_chapter"},[a("div",{staticClass:"chapter_basic"},[a("p",[t._v("图书章节管理")]),t._v(" "),a("el-button",{staticClass:"addBookChpater",attrs:{type:"primary"},on:{click:t.addBookChpater}},[t._v("添加章节")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.chapterData}},[a("el-table-column",{attrs:{prop:"title",label:"章节名称",width:"600"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.showChapterInfo(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),a("el-dialog",{attrs:{title:"章节信息",visible:t.dialogBookChapterVisible},on:{"update:visible":function(e){t.dialogBookChapterVisible=e}}},[a("div",[t._v("\n                "+t._s(t.showCurrentChapter.title)+"\n              ")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.showCurrentChapter.content)}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogBookChapterVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogBookChapterVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),a("el-button",{staticClass:"edit",attrs:{type:"text"},on:{click:function(a){t.editCurrentChpater(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),e.row.index===t.lastindex-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getDelRow(e.$index,e.row)}}},[t._v("删除")]):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确认删除?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){e.preventDefault(),t.deleteRow()}}},[t._v("确 定")])],1)])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"blockPage"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.count,"current-page":t.current_page},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},2:function(t,e){},"35GQ":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",[a("router-view",{on:{userSignIn:t.userSignIn}})],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},"3Htp":function(t,e,a){"use strict";function o(t){a("8bjT")}var n=a("vwLb"),i=a("9iuE"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-64bbd4ca",null);e.a=l.exports},"3JAQ":function(t,e,a){"use strict";var o=a("hs4R"),n=a.n(o);e.a={data:function(){return{userId:"",userData:[],dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"100px",userForm:{}}},created:function(){this.getId(),this.getUserInfo()},methods:{getId:function(){this.userId=this.$route.params.userid},getUserInfo:function(){var t=this;n.a.get("/user/info/"+this.userId).then(function(e){t.userData.push(e.data.data),t.userForm={avatar:e.data.data.avatar,nickname:e.data.data.nickname}}).catch(function(e){t.$message.error("查询失败")})},updateUserInfo:function(){this.dialogFormVisible=!1;var t=this;null==this.userForm.avatar||null==this.userForm.nickname?t.$message.error("不能为空"):n.a.put("/user/info/"+this.userId,t.userForm).then(function(e){t.userData[0].avatar=t.userForm.avatar,t.userData[0].nickname=t.userForm.nickname})}}}},"4dyY":function(t,e){},"8bjT":function(t,e){},"9QLE":function(t,e,a){"use strict";function o(t){a("hm4z")}var n=a("rtyH"),i=a("oI5+"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-130f67b6",null);e.a=l.exports},"9iuE":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"search-place"},[a("el-input",{attrs:{placeholder:"请输入书名",clearable:""},model:{value:t.inputSearch,callback:function(e){t.inputSearch=e},expression:"inputSearch"}}),t._v(" "),a("el-button",{staticClass:"searchBtn",on:{click:t.searchBook}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"uploadExcel searchBtn",on:{click:t.addClick}},[t._v("\n                导入 excel\n                "),a("input",{ref:"importExcel",staticClass:"uploadInput",attrs:{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:function(e){t.importExcel(this)}}})]),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出到 Excel")]),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"success"},on:{click:t.resetAll}},[t._v("重置")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,id:"out-table"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updated_at",label:"入库日期",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"书名",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Category.type",label:"分类",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getBookInfo(e.row)}}},[t._v("详细信息")]),t._v(" "),a("el-button",{staticClass:"selectCategoryClick",attrs:{type:"text"},on:{click:function(a){t.clickChangeCate(e.row)}}},[t._v("修改分类")]),t._v(" "),a("el-dialog",{attrs:{title:"分类管理",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.formChangeCate}},[a("el-form-item",{attrs:{label:"分类选择","label-width":t.formLabelWidth}},[a("el-cascader",{attrs:{options:t.selectCategory,props:t.props,"expand-trigger":"hover"},on:{"active-item-change":t.handleCateChange},model:{value:t.chooseType,callback:function(e){t.chooseType=e},expression:"chooseType"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.getChangeCate}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getDelRow(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确认删除?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){e.preventDefault(),t.deleteRow()}}},[t._v("确 定")])],1)])]}}])})],1),t._v(" "),a("div",{staticClass:"blockPage"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.count,"current-page":t.current_page},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},"9mjt":function(t,e,a){"use strict";var o=a("Sxqw"),n=a.n(o),i=a("u6qr"),s=a.n(i),r=a("7A1g"),l=a.n(r),c=a("wvFn"),u=a.n(c);e.a={data:function(){return{inputSearch:"",selectSearch:"",options:[{value:"-1",label:"全部"},{value:"3",label:"系统管理员"},{value:"2",label:"图书管理员"},{value:"1",label:"普通用户"}],changeRoleoptions:[{value:"3",label:"系统管理员"},{value:"2",label:"图书管理员"},{value:"1",label:"普通用户"}],dialogTableVisible:!1,dialogFormVisible:!1,dialogVisible:!1,form:{name:"",region:"",role:"",delivery:!1,type:[],resource:"",desc:""},newRow:{},formLabelWidth:"120px",tableData:[],nowTableData:[],tableColumns:[{label:"id",prop:"id"},{label:"用户名",prop:"account"},{label:"姓名",prop:"nickname"},{label:"身份",prop:"rolename"}],delIndex:"",delRows:"",searchRole:"",selectRole:"",loading:!0,count:0,currentPageSave:0}},created:function(){this.getAllUser()},mounted:function(){},methods:{getAllUser:function(){var t=this;this.$axios.get("/admin/user/-1").then(function(e){t.count=e.data.count;var a=!0,o=!1,n=void 0;try{for(var i,r=s()(e.data.rows);!(a=(i=r.next()).done);a=!0){var l=i.value;3==l.role?l.rolename="系统管理员":2==l.role?l.rolename="图书管理员":1==l.role&&(l.rolename="普通用户")}}catch(t){o=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}t.tableData=e.data.rows,t.nowTableData=t.tableData.rows,t.loading=!1})},getUserInfo:function(t){this.$store.commit("save_detail_userInfo",t),this.$router.push({path:"userinfo/"+t.id})},handleCurrentChange:function(t){var e=this;this.currentPageSave=t,0==t&&(t+=1),this.$axios.get("/admin/user/-1?offset="+(t-1)).then(function(t){var a=!0,o=!1,n=void 0;try{for(var i,r=s()(t.data.rows);!(a=(i=r.next()).done);a=!0){var l=i.value;3==l.role?l.rolename="系统管理员":2==l.role?l.rolename="图书管理员":1==l.role&&(l.rolename="普通用户")}}catch(t){o=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}e.tableData=t.data.rows,e.nowTableData=e.tableData.rows})},clickChangeRole:function(t){this.newRow=t},getChangeRole:function(t){this.selectRole=t},changeRole:function(){var t=this;this.dialogFormVisible=!1,""==this.form.region?this.$message.error("修改失败,所选内容不能为空"):"全部"==this.form.region?this.$message.error("修改失败"):this.$axios.put("/admin/"+this.newRow.id,{role:this.selectRole}).then(function(e){1==e.data[0]?(t.$message("修改成功"),3==t.selectRole?t.newRow.rolename="系统管理员":2==t.selectRole?t.newRow.rolename="图书管理员":1==t.selectRole&&(t.newRow.rolename="普通用户")):t.$message("修改失败,请刷新重试")}).catch(function(e){t.$message.error("修改出现问题,请联系管理员")})},exportExcel:function(){var t=u.a.utils.table_to_book(document.querySelector("#out-table")),e=u.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{l.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"user-manage.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},importExcel:function(t){this.$refs.inputer;this.file=event.currentTarget.files[0];var e=this.file,o=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var e,o,i="",s=new FileReader;s.onload=function(t){for(var r=this,l=new Uint8Array(s.result),c=l.byteLength,u=0;u<c;u++)i+=String.fromCharCode(l[u]);var d=a("wvFn");e=d.read(i,{type:"binary"}),o=d.utils.sheet_to_json(e.Sheets[e.SheetNames[0]]),this.da=[].concat(n()(o));var h=[];this.da.map(function(t){var e={};e.account=t.account,e.nickname=t.nickname,e.avatar=t.avatar,e.signature=t.signature,e.password=t.password,h.push(e)}),this.$axios.post("/admin/register",{userList:h}).then(function(t){r.$message({message:"请耐心等待导入成功",type:"success"}),r.$refs.importExcel.value=null,r.getAllUser(),r.handleCurrentChange(r.currentPageSave)}).catch(function(t){r.$message.error("错了哦，这是一条错误消息")})},s.readAsArrayBuffer(t)},o.readAsBinaryString(e)},addClick:function(){document.querySelector(".uploadInput").click()},getSearchRole:function(t){if(this.searchRole=t,this.tableData=[],-1==t)this.tableData=this.nowTableData;else{var e=!0,a=!1,o=void 0;try{for(var n,i=s()(this.nowTableData);!(e=(n=i.next()).done);e=!0){var r=n.value;r.role==this.searchRole&&this.tableData.push(r)}}catch(t){a=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw o}}}},searchUser:function(){var t=this;if(this.tableData=[],""==this.inputSearch&&""==this.selectSearch)return void this.$message.error("请输入要搜索的用户名");this.$axios.get("/admin/search?name="+this.inputSearch).then(function(e){var a=!0,o=!1,n=void 0;try{for(var i,r=s()(e.data.rows);!(a=(i=r.next()).done);a=!0){var l=i.value;3==l.role?l.rolename="系统管理员":2==l.role?l.rolename="图书管理员":1==l.role&&(l.rolename="普通用户")}}catch(t){o=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}t.tableData=e.data.rows,t.count=e.data.count,t.$message("搜索成功")}).catch(function(e){t.$message.error("搜索失败")})},resetAll:function(){this.inputSearch="",this.selectSearch="",this.getAllUser()}}}},"9oqr":function(t,e){},BTx6:function(t,e){},EvfC:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"book_chapter"},[a("div",{staticClass:"basicInfo"},[a("div",{staticClass:"current_index"},[t._v("\n\t\t\t当前章节: "+t._s(t.chapter_index)+"\n\t\t")]),t._v(" "),a("el-button",{staticClass:"uploadBookChapter",attrs:{type:"success"},on:{click:t.uploadBookChapter}},[t._v("提交")]),t._v(" "),a("el-button",{staticClass:"goback",on:{click:t.goback}},[t._v("返回上一页")])],1),t._v(" "),a("div",{staticClass:"chapter_info"},[t._v("\n\t\t章节标题: "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.chapter_title,callback:function(e){t.chapter_title=e},expression:"chapter_title"}}),t._v(" "),a("div",{staticClass:"splitModel"}),t._v(" "),a("vue-editor",{on:{imageAdded:t.handleImageAdded},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])},n=[],i={render:o,staticRenderFns:n};e.a=i},FJSN:function(t,e,a){"use strict";e.a={data:function(){return{user_name:sessionStorage.user_name,user_role:sessionStorage.user_role}},methods:{userSignIn:function(t,e){sessionStorage.user_name=t,sessionStorage.user_role=e,this.user_name=sessionStorage.user_name,this.user_role=sessionStorage.user_role}}}},G3UJ:function(t,e){},IBCk:function(t,e,a){"use strict";a("IcnI");e.a={data:function(){return{menus:[],menus1:[{route:"/index",name:"首页"},{route:"/bookmanage",name:"图书管理"},{route:"/bookgroup",name:"图书分组管理"},{route:"/personal",name:"个人中心"}],menus2:[{route:"/index",name:"首页"},{route:"/usermanage",name:"用户管理"},{route:"/articlemanage",name:"文章管理"},{route:"/bookmanage",name:"图书管理"},{route:"/bookgroup",name:"图书分组管理"},{route:"/personal",name:"个人中心"}]}},created:function(){this.isAdmin()},mounted:function(){"/index"!==this.$route.path&&-1==this.$route.path.indexOf("userInfo")?(this.$store.commit("add_tabs",{route:"/index",name:"首页"}),this.$store.commit("add_tabs",{route:this.$route.path,name:this.$route.name}),this.$store.commit("set_active_index",this.$route.path)):(this.$store.commit("add_tabs",{route:"/index",name:"首页"}),this.$store.commit("set_active_index","/index"),this.$router.push("/index"))},computed:{options:function(){return this.$store.state.options}},methods:{isAdmin:function(){var t=sessionStorage.user_role;2==t?this.menus=this.menus1:3==t&&(this.menus=this.menus2)}}}},IcnI:function(t,e,a){"use strict";var o=a("u6qr"),n=a.n(o),i=a("FevL"),s=a("EcfS");i.default.use(s.a);var r=new s.a.Store({state:{options:[],activeIndex:"/user",bookInfo:{},userInfo:{}},mutations:{add_tabs:function(t,e){this.state.options.push(e)},delete_tabs:function(t,e){var a=0,o=!0,i=!1,s=void 0;try{for(var r,l=n()(t.options);!(o=(r=l.next()).done);o=!0){if(r.value.route===e)break;a++}}catch(t){i=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}this.state.options.splice(a,1)},set_active_index:function(t,e){this.state.activeIndex=e},save_detail_userInfo:function(t,e){this.state.userInfo=e},save_detail_bookInfo:function(t,e){this.state.bookInfo=e}}});e.a=r},Idop:function(t,e){},L4uQ:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"search-place"},[a("el-input",{attrs:{placeholder:"请输入要搜索的文章标题",clearable:""},model:{value:t.inputSearch,callback:function(e){t.inputSearch=e},expression:"inputSearch"}}),t._v(" "),a("el-button",{staticClass:"searchBtn",on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"success"},on:{click:t.resetAll}},[t._v("重置")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,id:"out-table"}},[t._l(t.tableColumns,function(t){return[a("el-table-column",{attrs:{label:t.label,prop:t.prop}})]}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.showArticleInfo(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),a("el-dialog",{attrs:{title:"文章信息",visible:t.showVisible},on:{"update:visible":function(e){t.showVisible=e}}},[a("div",[t._v("\n            "+t._s(t.showCurrentArticle.title)+"\n          ")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.showCurrentArticle.content)}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getDelRow(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteVisible,width:"30%"},on:{"update:visible":function(e){t.deleteVisible=e}}},[a("span",[t._v("确认删除?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){e.preventDefault(),t.deleteRow()}}},[t._v("确 定")])],1)])]}}])})],2),t._v(" "),a("div",{staticClass:"blockPage"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.count,"current-page":t.current_page},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},LMJ6:function(t,e,a){"use strict";function o(t){a("ZG3n")}var n=a("wFBh"),i=a("z1pA"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,null,null);e.a=l.exports},"M/jf":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cateManage"},[a("div",{staticClass:"rightbook"},[a("div",{staticClass:"herderOption"},[a("el-button",{staticClass:"addBtn",attrs:{type:"primary",round:""},on:{click:function(e){t.addBookCategory=!0}}},[t._v("添加")])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加分类",visible:t.addBookCategory},on:{"update:visible":function(e){t.addBookCategory=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"方向","label-width":t.formLabelWidth}},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入方向"},model:{value:t.form.nameDirection,callback:function(e){t.$set(t.form,"nameDirection",e)},expression:"form.nameDirection"}},t._l(this.bookTableData,function(t){return a("el-option",{key:t.category,attrs:{label:t.category,value:t.category}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"分类","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.nameCategory,callback:function(e){t.$set(t.form,"nameCategory",e)},expression:"form.nameCategory"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addBookCategory=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addBookCate()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.bookTableData,"default-sort":{prop:"category",order:"descending"}}},[a("el-table-column",{attrs:{prop:"category",label:"方向",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"分类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{"visible-change":function(a){t.getType(e.$index,e.row)}},model:{value:t.selectTypeModel[e.$index],callback:function(a){t.$set(t.selectTypeModel,e.$index,a)},expression:"selectTypeModel[scope.$index]"}},t._l(t.selectType,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.type,value:t.id}})}))]}}])}),t._v(" "),a("el-table-column",{staticClass:"options",attrs:{label:"操作",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getBookDelRow(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确认删除?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){e.preventDefault(),t.deleteBookRow()}}},[t._v("确 定")])],1)])]}}])})],1)],1)])},n=[],i={render:o,staticRenderFns:n};e.a=i},M93x:function(t,e,a){"use strict";function o(t){a("pl3k")}var n=a("FJSN"),i=a("35GQ"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-4ad09886",null);e.a=l.exports},MzC0:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"people"}},[a("div",{staticClass:"box-of-star1"},[a("div",{staticClass:"star star-position1"}),t._v(" "),a("div",{staticClass:"star star-position2"}),t._v(" "),a("div",{staticClass:"star star-position3"}),t._v(" "),a("div",{staticClass:"star star-position4"}),t._v(" "),a("div",{staticClass:"star star-position5"}),t._v(" "),a("div",{staticClass:"star star-position6"}),t._v(" "),a("div",{staticClass:"star star-position7"})]),t._v(" "),a("div",{staticClass:"box-of-star2"},[a("div",{staticClass:"star star-position1"}),t._v(" "),a("div",{staticClass:"star star-position2"}),t._v(" "),a("div",{staticClass:"star star-position3"}),t._v(" "),a("div",{staticClass:"star star-position4"}),t._v(" "),a("div",{staticClass:"star star-position5"}),t._v(" "),a("div",{staticClass:"star star-position6"}),t._v(" "),a("div",{staticClass:"star star-position7"})]),t._v(" "),a("div",{staticClass:"box-of-star3"},[a("div",{staticClass:"star star-position1"}),t._v(" "),a("div",{staticClass:"star star-position2"}),t._v(" "),a("div",{staticClass:"star star-position3"}),t._v(" "),a("div",{staticClass:"star star-position4"}),t._v(" "),a("div",{staticClass:"star star-position5"}),t._v(" "),a("div",{staticClass:"star star-position6"}),t._v(" "),a("div",{staticClass:"star star-position7"})]),t._v(" "),a("div",{staticClass:"box-of-star4"},[a("div",{staticClass:"star star-position1"}),t._v(" "),a("div",{staticClass:"star star-position2"}),t._v(" "),a("div",{staticClass:"star star-position3"}),t._v(" "),a("div",{staticClass:"star star-position4"}),t._v(" "),a("div",{staticClass:"star star-position5"}),t._v(" "),a("div",{staticClass:"star star-position6"}),t._v(" "),a("div",{staticClass:"star star-position7"})]),t._v(" "),a("div",{staticClass:"astronaut",attrs:{"data-js":"astro"}},[a("div",{staticClass:"head"}),t._v(" "),a("div",{staticClass:"arm arm-left"}),t._v(" "),a("div",{staticClass:"arm arm-right"}),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"panel"})]),t._v(" "),a("div",{staticClass:"leg leg-left"}),t._v(" "),a("div",{staticClass:"leg leg-right"}),t._v(" "),a("div",{staticClass:"schoolbag"})])])}],i={render:o,staticRenderFns:n};e.a=i},NHaI:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("FevL"),n=a("M93x"),i=a("YaEn"),s=a("G3UJ"),r=(a.n(s),a("BaXa")),l=a.n(r),c=a("9oqr"),u=(a.n(c),a("IcnI")),d=a("hs4R"),h=a.n(d);o.default.config.productionTip=!1,o.default.prototype.$axios=h.a,h.a.defaults.withCredentials=!0,o.default.use(l.a),o.default.prototype.$serverIP="http://172.20.178.107:7001",a("txPn"),new o.default({el:"#app",router:i.a,store:u.a,template:"<App/>",components:{App:n.a}})},NRBp:function(t,e,a){"use strict";var o=a("IBCk"),n=a("s6s0"),i=a("D8HT"),s=i(o.a,n.a,!1,null,null,null);e.a=s.exports},Ncqm:function(t,e){},Qr4H:function(t,e){},RLW7:function(t,e,a){"use strict";function o(t){a("Qr4H")}var n=a("c4+w"),i=a("fUji"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-7b5eb883",null);e.a=l.exports},Spm7:function(t,e,a){"use strict";var o=a("u6qr"),n=a.n(o),i=(a("IcnI"),a("NRBp"));e.a={name:"home",components:{AppNav:i.a},data:function(){return{user_name:""}},mounted:function(){this.user_name=sessionStorage.user_name},methods:{logout:function(){var t=this;this.$axios.get("/user/logout").then(function(){sessionStorage.clear(),location.reload(),t.$router.push({path:"/login"})})},tabClick:function(t){var e=this.activeIndex;"/userinfo"===this.activeIndex?e=this.activeIndex+"/"+this.$store.state.userInfo.id:"/bookinfo"===this.activeIndex?e=this.activeIndex+"/"+this.$store.state.bookInfo.id:"/bookchapter"===this.activeIndex&&(e=this.activeIndex+"/"),this.$router.push({path:e})},tabRemove:function(t){"/index"!=t&&(this.$store.commit("delete_tabs",t),this.activeIndex===t&&(this.options&&this.options.length>=1?(this.$store.commit("set_active_index",this.options[this.options.length-1].route),this.$router.push({path:this.activeIndex})):this.$router.push({path:"/index"})))}},computed:{options:function(){return this.$store.state.options},activeIndex:{get:function(){return this.$store.state.activeIndex},set:function(t){this.$store.commit("set_active_index",t)}}},watch:{$route:function(t){var e=!1;if("/bookchapter/"===t.path)return!1;var a=!0,o=!1,i=void 0;try{for(var s,r=n()(this.options);!(a=(s=r.next()).done);a=!0){if(s.value.name===t.name){e=!0,this.$store.commit("set_active_index","/"+t.path.split("/")[1]);break}}}catch(t){o=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw i}}e||(this.$store.commit("add_tabs",{route:"/"+t.path.split("/")[1],name:t.name}),this.$store.commit("set_active_index","/"+t.path.split("/")[1]))}}}},SyUn:function(t,e,a){"use strict";function o(t){a("4dyY")}var n=a("9mjt"),i=a("aTvm"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-5205372c",null);e.a=l.exports},UEyH:function(t,e,a){"use strict";function o(t){a("NHaI")}var n=a("ZEZZ"),i=a("M/jf"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-5ea8aef8",null);e.a=l.exports},WNR5:function(t,e){},YaEn:function(t,e,a){"use strict";var o=a("3SZ7"),n=a.n(o),i=a("FevL"),s=a("dNqC"),r=(a("IcnI"),a("xJsL")),l=a("vrQ8"),c=a("lO7g"),u=a("LMJ6"),d=a("SyUn"),h=a("9QLE"),p=a("o7DC"),v=a("RLW7"),f=a("Zlp2"),m=a("baXO"),b=a("3Htp"),g=a("UEyH"),_=a("1Xb2");i.default.use(s.a);var k=new s.a({routes:[{path:"/login",name:"登录",component:r.a},{path:"/",name:"主页",component:c.a,meta:{requireAuth:!0},children:[{path:"index",name:"首页",component:l.a,meta:{requireAuth:!0}},{path:"usermanage",name:"用户管理",component:d.a,meta:{requireAuth:!0,adminAuth:!0}},{path:"bookgroup",name:"图书分组管理",component:g.a,meta:{requireAuth:!0}},{path:"usergroup",name:"用户分组管理",component:h.a,meta:{requireAuth:!0,adminAuth:!0}},{path:"userinfo/:userid",name:"用户详情页",component:p.a,meta:{requireAuth:!0}},{path:"articlemanage",name:"文章管理页",component:f.a,meta:{requireAuth:!0}},{path:"bookmanage",name:"图书管理",component:b.a,meta:{requireAuth:!0}},{path:"bookinfo/:bookid",name:"图书详情页",component:m.a,meta:{requireAuth:!0}},{path:"bookchapter",name:"图书章节添加页",component:_.a,meta:{requireAuth:!0,requireQuery:!0}},{path:"personal",name:"个人中心",component:v.a,meta:{requireAuth:!0}}]},{path:"/404",name:"404",component:u.a},{path:"/403",name:"403 Forbidden",component:u.a},{path:"*",redirect:"/index"}]});k.beforeEach(function(t,e,a){t.meta.requireAuth?(0===sessionStorage.length?a({path:"/login"}):a(),t.meta.adminAuth&&(3==sessionStorage.user_role?a():a({path:"/index"})),"/"==t.fullPath&&a({path:"/index"})):a(),t.meta.requireQuery&&("{}"==n()(t.query)?a({path:"/bookmanage"}):a())}),e.a=k},ZEZZ:function(t,e,a){"use strict";e.a={data:function(){return{loading:!0,allCategory:[],searchAllCategory:"",dialogVisible:!1,delIndex:0,delRows:0,bookTableData:[],selectType:[],selectTypeModel:[],addBookCategory:!1,options:[],form:{nameDirection:"",nameCategory:""},formLabelWidth:"120px"}},created:function(){this.getBookCategory()},methods:{getBookCategory:function(){var t=this;this.$axios.get("/category").then(function(e){t.bookTableData=e.data,t.loading=!1}).catch(function(){t.$message.error("出现错误,请刷新再试或联系管理员")})},getType:function(t,e){var a=this;this.$axios.get("/category/type?category="+e.category).then(function(t){a.selectType=t.data})},getBookDelRow:function(t,e){this.dialogVisible=!0,this.delIndex=t,this.delRows=e},deleteBookRow:function(){var t=this;this.dialogVisible=!1,this.$axios.delete("/category/"+this.selectTypeModel).then(function(){t.selectTypeModel="",t.$message("删除成功")})},addBookCate:function(){var t=this;""==this.form.nameDirection||""==this.form.nameCategory?this.$message.error("输入不能为空"):this.$axios.post("/category",{category:this.form.nameDirection,type:this.form.nameCategory}).then(function(){t.$message("添加成功"),t.getBookCategory(),t.addBookCategory=!1}).catch(function(e){t.$message.error("出现错误,请刷新再试或联系管理员")})},resetAll:function(){this.addBook="",this.getBookCategory()}}}},ZG3n:function(t,e){},Zlp2:function(t,e,a){"use strict";function o(t){a("/vsJ")}var n=a("rxEK"),i=a("L4uQ"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-618d9d8e",null);e.a=l.exports},aTvm:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"search-place"},[a("el-input",{attrs:{placeholder:"请输入要搜索用户名",clearable:""},model:{value:t.inputSearch,callback:function(e){t.inputSearch=e},expression:"inputSearch"}}),t._v(" "),a("el-button",{staticClass:"searchBtn",on:{click:t.searchUser}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"uploadExcel searchBtn",on:{click:t.addClick}},[t._v("\n            导入 excel\n            "),a("input",{ref:"importExcel",staticClass:"uploadInput",attrs:{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:function(e){t.importExcel(this)}}})]),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出到 Excel")]),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"success"},on:{click:t.resetAll}},[t._v("重置")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,id:"out-table"}},[t._l(t.tableColumns,function(t){return[a("el-table-column",{attrs:{label:t.label,prop:t.prop}})]}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getUserInfo(e.row)}}},[t._v("详细信息")]),t._v(" "),a("el-button",{staticClass:"options",attrs:{type:"text"},on:{click:function(a){t.clickChangeRole(e.row),t.dialogFormVisible=!0}}},[t._v("修改权限")]),t._v(" "),a("el-dialog",{attrs:{title:"权限管理",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"权限选择","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择权限"},on:{change:t.getChangeRole},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.changeRoleoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changeRole()}}},[t._v("确 定")])],1)],1)]}}])})],2),t._v(" "),a("div",{staticClass:"blockPage"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.count},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},baXO:function(t,e,a){"use strict";function o(t){a("Ncqm")}var n=a("sdDR"),i=a("1kkg"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-42da2330",null);e.a=l.exports},blHp:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("div",{staticClass:"app-header"},[a("div",{staticClass:"title"},[t._v("图书馆后台管理系统")]),t._v(" "),a("div",{staticClass:"welcome"},[t._v("欢迎你,\n      "),a("el-dropdown",{on:{command:t.logout}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n            "+t._s(t.user_name)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("退出")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"app-content"},[a("div",{staticClass:"app-nav"},[a("app-nav")],1),t._v(" "),a("div",{staticClass:"app-wrap"},[a("div",{staticClass:"template-tabs"},[t.options.length?a("el-tabs",{attrs:{type:"border-card",closable:""},on:{"tab-click":t.tabClick,"tab-remove":t.tabRemove},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.options,function(t,e){return a("el-tab-pane",{key:t.name,attrs:{label:t.name,name:t.route}})})):t._e()],1),t._v(" "),a("div",{staticClass:"content-wrap"},[a("router-view")],1)])])])},n=[],i={render:o,staticRenderFns:n};e.a=i},"c4+w":function(t,e,a){"use strict";e.a={data:function(){return{tableData:[{date:"2016-05-02",name:sessionStorage.user_name,role:sessionStorage.user_role,identity:""}]}},created:function(){this.roleToWord()},methods:{roleToWord:function(){3==this.tableData[0].role?this.tableData[0].identity="系统管理员":2==this.tableData[0].role&&(this.tableData[0].identity="图书管理员")}}}},dEyo:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-bg"},[a("div",{staticClass:"login-box clear"},[t._m(0),t._v(" "),a("div",{staticClass:"content fl"},[a("div",{staticClass:"form-wrap"},[t._m(1),t._v(" "),a("div",[a("div",{staticClass:"input-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_num,expression:"user_num"}],attrs:{placeholder:"账号"},domProps:{value:t.user_num},on:{input:function(e){e.target.composing||(t.user_num=e.target.value)}}}),t._v(" "),a("i",{staticClass:"icon-envelope-alt"})]),t._v(" "),a("div",{staticClass:"input-item"},[t.isShowPwd?a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_pwd,expression:"user_pwd"}],attrs:{type:"text",placeholder:"密码"},domProps:{value:t.user_pwd},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.btnLogin(e):null},input:function(e){e.target.composing||(t.user_pwd=e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_pwd,expression:"user_pwd"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.user_pwd},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.btnLogin(e):null},input:function(e){e.target.composing||(t.user_pwd=e.target.value)}}}),t._v(" "),a("i",{class:[t.isShowPwd?"el-icon-star-off":"el-icon-star-on"],on:{click:function(e){return e.stopPropagation(),t.showPassword(e)}}})]),t._v(" "),a("div",[a("el-button",{attrs:{round:""},on:{click:function(e){return e.stopPropagation(),t.btnLogin(e)}}},[t._v("登录")])],1)]),t._v(" "),t.loginTipMsg.length>0?a("p",{staticClass:"errmsg"},[t._v(t._s(t.loginTipMsg))]):t._e()])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aside fl"},[a("h3",{staticClass:"title"},[a("p",[t._v("图书后台管理系统")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"type"},[a("span",[t._v("登录到后台")])])}],i={render:o,staticRenderFns:n};e.a=i},fUji:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"identity",label:"权限",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"入职时间"}})],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},hm4z:function(t,e){},lO7g:function(t,e,a){"use strict";function o(t){a("BTx6")}var n=a("Spm7"),i=a("blHp"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,null,null);e.a=l.exports},"ld/U":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userinfo"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userData}},[a("el-table-column",{attrs:{label:"头像",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.userData[0].avatar,width:"40",height:"40"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"integral",label:"积分"}}),t._v(" "),a("el-table-column",{attrs:{prop:"readingTime",label:"阅读时长"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("修改")]),t._v(" "),a("el-dialog",{attrs:{title:"用户信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.userForm}},[a("el-form-item",{attrs:{label:"头像","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.userForm.avatar,callback:function(e){t.$set(t.userForm,"avatar",e)},expression:"userForm.avatar"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.userForm.nickname,callback:function(e){t.$set(t.userForm,"nickname",e)},expression:"userForm.nickname"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateUserInfo}},[t._v("确 定")])],1)],1)]}}])})],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},o7DC:function(t,e,a){"use strict";function o(t){a("WNR5")}var n=a("3JAQ"),i=a("ld/U"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-3ffd04ee",null);e.a=l.exports},"oI5+":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cateManage"},[a("div",{staticClass:"leftuser"},[a("el-input",{attrs:{placeholder:"请输入用户分组名"},model:{value:t.addUser,callback:function(e){t.addUser=e},expression:"addUser"}}),t._v(" "),a("el-button",{staticClass:"addBtn",attrs:{round:""},on:{click:t.searchUserCate}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"primary",round:""},on:{click:t.addUserCate}},[t._v("添加")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.userTableData,id:"out-table"}},[t._l(t.userTableColumns,function(t){return[a("el-table-column",{attrs:{label:t.label,prop:t.prop,align:"center"}})]}),t._v(" "),a("el-table-column",{staticClass:"options",attrs:{label:"操作",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.getUserDelRow(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确认删除?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){e.preventDefault(),t.deleteUserRow()}}},[t._v("确 定")])],1)])]}}])})],2)],1),t._v(" "),a("div",{staticClass:"resetBtn"},[a("el-button",{attrs:{type:"success"},on:{click:t.resetAll}},[t._v("重置")])],1)])},n=[],i={render:o,staticRenderFns:n};e.a=i},pl3k:function(t,e){},rFdY:function(t,e){},rtyH:function(t,e,a){"use strict";var o=a("hs4R"),n=a.n(o);e.a={data:function(){return{loading:!0,dialogVisible:!1,delIndex:0,delRows:0,userTableData:[],addUser:"",selectCate:["全部","全部"],userTableColumns:[{label:"id",prop:"id"},{label:"用户分组",prop:"label"}]}},created:function(){this.getUserCategory()},methods:{getUserCategory:function(){var t=this;n.a.get("/user/category").then(function(e){t.userTableData=e.data,t.loading=!1})},getUserDelRow:function(t,e){this.dialogVisible=!0,this.delIndex=t,this.delRows=e},deleteUserRow:function(){this.dialogVisible=!1,this.userTableData.splice(this.delIndex,1);var t=this;n.a.delete("/user/"+this.delRows.id).then(function(){t.$message("删除成功")})},addUserCate:function(){var t=this,e=this;""==e.addUser?e.$message.error("输入不能为空"):n.a.post("/user/category/add",{cateName:e.addUser}).then(function(){e.$message("添加成功"),t.getUserCategory()}).catch(function(t){console.log(t),e.$message.error("出现错误,请刷新再试或联系管理员")})},searchUserCate:function(){var t=this;""==t.addUser?t.$message.error("输入不能为空"):n.a.post("/user/category/search",{cateName:t.addUser}).then(function(e){t.userTableData=[],t.$message("查找成功"),t.userTableData.push(e.data)}).catch(function(e){console.log(e),t.$message.error("出现错误,请刷新再试或联系管理员")})},resetAll:function(){this.addBook="",this.addUser="",this.getUserCategory()}}}},rxEK:function(t,e,a){"use strict";e.a={data:function(){return{inputSearch:"",showVisible:!1,deleteVisible:!1,tableData:[],tableColumns:[{label:"id",prop:"id"},{label:"文章标题",prop:"title"},{label:"作者",prop:"author.nickname"},{label:"点赞数",prop:"likedUser.length"}],delIndex:"",delRows:"",loading:!0,count:0,currentPageSave:0,showCurrentArticle:{title:"",content:""},isSearchExist:"",current_page:1}},created:function(){this.getAllArticle()},mounted:function(){},methods:{getAllArticle:function(){var t=this;this.$axios.get("/community").then(function(e){t.count=e.data.count,t.tableData=e.data.rows,t.loading=!1,t.isSearchExist=""})},resetAll:function(){this.inputSearch="",this.getAllArticle()},search:function(){var t=this;""===this.inputSearch&&this.$message.error("搜索不能为空"),this.isSearchExist=this.inputSearch,this.$axios.get("/community/search?key="+this.inputSearch).then(function(e){t.count=e.data.count,t.tableData=e.data.rows})},handleCurrentChange:function(t){var e=this;this.currentPageSave=t,0==t&&(t+=1),""!==this.isSearchExist?this.$axios.get("/community?offset="+(t-1)+"?key="+this.isSearchExist).then(function(t){e.tableData=t.data.rows}):this.$axios.get("/community?offset="+(t-1)).then(function(t){e.tableData=t.data.rows})},getDelRow:function(t,e){this.deleteVisible=!0,this.delIndex=t,this.delRows=e},deleteRow:function(){var t=this;this.deleteVisible=!1,this.tableData.splice(this.delIndex,1),this.$axios.delete("/community/"+this.delRows.id).then(function(e){t.$message("删除成功"),t.current_page=1}).catch(function(e){t.$message.error("错了哦，这是一条错误消息")})},showArticleInfo:function(t,e){var a=this;this.$axios.get("/community/"+e.id).then(function(t){a.showVisible=!0,a.showCurrentArticle={title:t.data.title,content:t.data.content}}).catch(function(t){a.$message.error("错了哦，这是一条错误消息")})}}}},s6s0:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-nav-wrap"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.$route.path,router:""}},t._l(t.menus,function(e){return a("el-menu-item",{key:e.route,attrs:{index:e.route}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "+t._s(e.name)+"\n    ")])}))],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},sdDR:function(t,e,a){"use strict";e.a={data:function(){return{bookId:"",bookData:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogBookChapterVisible:!1,formLabelWidth:"100px",bookForm:{},loading:!0,chapterData:[],currentPageSave:1,count:0,lastindex:0,dialogVisible:!1,delIndex:0,currentRows:"",showCurrentChapter:{title:"",content:"",index:""},current_page:1}},created:function(){this.getId(),this.getBookInfo(),this.getAllChapterInfo()},methods:{getId:function(){this.bookId=this.$route.params.bookid},getBookInfo:function(){var t=this;this.$axios.get("/book/"+this.bookId).then(function(e){t.bookData.push(e.data),t.bookForm=e.data,t.loading=!1})},updateBookInfo:function(){var t=this;this.dialogFormVisible=!1,this.$axios.put("/book/"+this.bookId,this.bookForm).then(function(e){console.log(e.data),t.$message({message:"修改成功",type:"success"})}).catch(function(){t.$message.error("错了哦，这是一条错误消息")})},getAllChapterInfo:function(){var t=this;this.$axios.get("/book/"+this.bookId+"/chapter").then(function(e){t.chapterData=e.data.rows,t.count=e.data.count,t.lastindex=t.count+1})},addBookChpater:function(){this.$router.push({path:"/bookchapter/?bookid="+this.bookId+"&currentIndex="+this.lastindex})},getDelRow:function(t,e){console.log(e.index,this.lastindex-1),this.dialogVisible=!0,this.delIndex=t,this.currentRows=e},deleteRow:function(){var t=this;this.dialogVisible=!1,this.chapterData.splice(this.delIndex,1),this.$axios.delete("/book/"+this.bookId+"/chapter?index="+(this.lastindex-1)).then(function(e){t.$message("删除成功"),t.current_page=1}).catch(function(e){t.$message.error("错了哦，这是一条错误消息")})},showChapterInfo:function(t,e){var a=this;this.$axios.get("/chapter/"+e.id).then(function(t){a.dialogBookChapterVisible=!0,a.showCurrentChapter={title:t.data.title,content:t.data.content,index:t.data.index}}).catch(function(t){a.$message.error("错了哦，这是一条错误消息")})},editCurrentChpater:function(t,e){console.log(e),this.$router.push({path:"/bookchapter/?bookid="+this.bookId+"&currentIndex="+e.index+"&chapterid="+e.id})},handleCurrentChange:function(t){var e=this;this.currentPageSave=t,this.current_page=t,this.$axios.get("/book/"+this.bookId+"/chapter?offset="+(t-1)).then(function(t){e.chapterData=t.data.rows}).catch(function(t){e.$message.error("错了哦，这是一条错误消息")})}}}},txPn:function(t,e,a){var o=a("cXQh");o.Random},vrQ8:function(t,e,a){"use strict";var o=a("MzC0"),n=a("D8HT"),i=n(null,o.a,!1,null,null,null);e.a=i.exports},vwLb:function(t,e,a){"use strict";var o=a("Sxqw"),n=a.n(o),i=a("WxFH"),s=a.n(i),r=a("7A1g"),l=a.n(r),c=a("wvFn"),u=a.n(c);e.a={data:function(){var t;return t={loading:!0,inputSearch:"",selectSearch:"",selectCategory:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogVisible:!1,formChangeCate:{name:"",region:"",delivery:!1,type:[],resource:"",desc:""},newRow:{},formLabelWidth:"120px",tableData:[],nowTableData:[],delIndex:"",delRows:"",searchCate:"",count:0,isFileChange:!0,currentPageSave:1},s()(t,"loading",!0),s()(t,"props",{value:"label",children:"type"}),s()(t,"chooseType",[]),s()(t,"newChangeCate",[]),s()(t,"current_page",1),t},mounted:function(){this.getCategory(),this.getAllBook()},methods:{getCategory:function(){var t=this;this.$axios.get("/category").then(function(e){var a=e.data;a.map(function(t){t.label=t.category,delete t.category,t.type=[]}),t.selectCategory=a})},getAllBook:function(){var t=this;this.$axios.get("/book").then(function(e){t.count=e.data.count,t.tableData=e.data.rows,t.nowTableData=t.tableData,t.loading=!1})},getBookInfo:function(t){this.$store.commit("save_detail_bookInfo",t),this.$router.push({path:"bookinfo/"+t.id})},clickChangeCate:function(t){this.newRow=t,this.dialogFormVisible=!0},handleCateChange:function(t){var e=this;this.$axios.get("/category/type?category="+t).then(function(a){var o=a.data;o.map(function(t){t.label=t.type,delete t.type});for(var n=0;n<o.length;n++)e.newChangeCate[o[n].id]=o[n].label;for(var i=0;i<e.selectCategory.length;i++)e.selectCategory[i].label===t.toString()&&(e.selectCategory[i].type=o)})},getChangeCate:function(){var t=this;this.dialogFormVisible=!1;for(var e=0,a=0;a<this.newChangeCate.length;a++)this.chooseType[1]===this.newChangeCate[a]&&(e=a);this.$axios.put("/book/"+this.newRow.id+"/type",{cid:e}).then(function(a){t.$message("修改成功"),t.newRow.Category.type=t.newChangeCate[e]}).catch(function(e){console.log(e),t.$message.error("修改出现问题,请联系管理员")})},handleCurrentChange:function(t){var e=this;this.currentPageSave=t,this.$axios.get("/book?offset="+(t-1)).then(function(t){e.tableData=t.data.rows,e.nowTableData=e.tableData})},getDelRow:function(t,e){this.dialogVisible=!0,this.delIndex=t,this.delRows=e},deleteRow:function(){var t=this;this.dialogVisible=!1,this.tableData.splice(this.delIndex,1),this.$axios.delete("/book/"+this.delRows.id).then(function(e){t.$message("删除成功"),t.current_page=1}).catch(function(e){t.$message.error("错了哦，这是一条错误消息")})},exportExcel:function(){var t=u.a.utils.table_to_book(document.querySelector("#out-table")),e=u.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{l.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"book-manage.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},importExcel:function(t){var e=this,o=this.$refs.inputer;console.log(o),this.file=event.currentTarget.files[0];var i=this.file,s=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var o,i,s="",r=new FileReader;r.onload=function(t){for(var l=new Uint8Array(r.result),c=l.byteLength,u=0;u<c;u++)s+=String.fromCharCode(l[u]);var d=a("wvFn");o=d.read(s,{type:"binary"}),i=d.utils.sheet_to_json(o.Sheets[o.SheetNames[0]]),this.da=[].concat(n()(i));var h=[];this.da.map(function(t){var e={};e.name=t.name,e.cover=t.cover,e.cid=t.cid,e.company=t.company,e.author=t.author,e.blurb=t.blurb,e.position=t.position,e.pdate=t.pdate,h.push(e)}),e.$axios.post("/book",{booklist:h}).then(function(t){e.$message({message:"请耐心等待导入成功",type:"success"}),e.$refs.importExcel.value=null,e.getAllBook(),e.handleCurrentChange(e.currentPageSave)}).catch(function(t){e.$message.error("错了哦，这是一条错误消息")})},r.readAsArrayBuffer(t)},s.readAsBinaryString(i)},addClick:function(){document.querySelector(".uploadInput").click()},searchBook:function(){var t=this;""==this.inputSearch?this.$message.error("请输入要搜索的名字"):this.$axios.get("/book/search?bookname="+this.inputSearch).then(function(e){t.$message("搜索成功"),t.tableData=e.data,t.selectSearch=""}).catch(function(){t.$message.error("搜索失败,请重试")})},resetAll:function(){this.inputSearch="",this.selectSearch="",this.getAllBook()}}}},wFBh:function(t,e,a){"use strict";e.a={data:function(){return{}}}},xJsL:function(t,e,a){"use strict";function o(t){a("Idop")}var n=a("12bV"),i=a("dEyo"),s=a("D8HT"),r=o,l=s(n.a,i.a,!1,r,"data-v-64b95f7c",null);e.a=l.exports},z1pA:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"router-template"},[a("div",{staticClass:"template-wrap"},[t._v("\n    "+t._s(t.$route.name)+"\n  ")])])},n=[],i={render:o,staticRenderFns:n};e.a=i}},["NHnr"]);
//# sourceMappingURL=app.1c3846c7aa0512dc1aa9.js.map